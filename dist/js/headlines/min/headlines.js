const apiKey="32ad11f7baf84533819d0089abe5c95c",apiSource="https://newsapi.org/v2/";function getMenuItems(e){var n=new Array;$.getJSON("assets/data/menu.json",function(t){$.each(t,function(e,t){n.push(t)}),e(n)})}function alphanumericsonly(e){var n=/([^A-Za-z0-9])/;n.test(e.value)&&(e.value=e.value.replace(n,""))}var publisherInfo;$(window).scroll(function(){$(this).scrollTop()>300?$(".scrollTop").show():$(".scrollTop").hide()}),$(document).ready(function(){$("#loading").hide(),$(".scrollTop").hide();var e=$(".scrollTop");$(e).click(function(){return $("html, body").animate({scrollTop:0},800),!1}),$("button.nextButton").hide(),$("button.prevButton").hide()}),$(document).ready(function(){if("/"===window.location.pathname||"/index.html"===window.location.pathname){var e=[],n=[],t=document.getElementById("menuCountry"),a=document.getElementById("menuCategory");getMenuItems(function(i){var o=i[1],l=i[0];o.forEach(function(n){"gb"==n.id?(e.push(`<option id="menuCountryItem" selected value="${n.id}">${n.name}</option>`),t.innerHTML=`${e}`):(e.push(`<option id="menuCountryItem" value="${n.id}">${n.name}</option>`),t.innerHTML=`${e}`)}),l.forEach(function(e){n.push(`<option id="menuCategoryItem" value="${e.id}">${e.name}</option>`),a.innerHTML=`${n}`})})}else if("/advanced.html"===window.location.pathname){var i=[],o=[],l=document.getElementById("menuLanguages"),r=document.getElementById("menuSortBy");getMenuItems(function(e){var n=e[3];e[2].forEach(function(e){i.push(`<option id="menuCategoryItem" value="${e.id}">${e.name}</option>`),l.innerHTML=`${i}`}),n.forEach(function(e){o.push(`<option id="menuCategoryItem" value="${e.id}">${e.name}</option>`),r.innerHTML=`${o}`})})}});const publisher={getPublisherInfo:()=>publisherInfo,setPublisherInfo(e){publisherInfo=e}};function sendPublisher(e,n){var t=`${apiSource}sources?`,a=function(e){var a=new XMLHttpRequest;a.open("GET",t),a.send(),a.onreadystatechange=function(){4==this.readyState&&200==this.status&&n(JSON.parse(this.responseText))}};e.country||e.language||e.category?(e.country&&(t+=`country=${e.country}&`),e.category&&(t+=`category=${e.category}&`),e.language&&(t+=`language=${e.language}&`),t+=`apiKey=${apiKey}`,a()):(t+=`&apiKey=${apiKey}`,a())}function addPublisher(e,n){sendPublisher(e,function(e){var t=e.sources;n(t),publisher.setPublisherInfo(t)})}function getPublisher(){return publisherInfo}var country,category,sources,search,pageResultHeadline,multiple=[],currentPageHeadline=1,currentPageSizeHeadline=100;function getHeadlineInfo(e){var n=document.getElementById("totalResultsInfoHeadline"),t=document.getElementById("output");function a(){$(".headlineMenu").hide(),$("#loading").show(),$(".menu-header").css("background-color","#ffffff");var a=[],i=new Array;i.country=country,i.category=category,i.sources=sources,i.q=search,i.page=currentPageHeadline,addHeadline(i,function(i){var o=i.articles;pageResultHeadline=i.totalResults,e?e?pageResultHeadline<currentPageSizeHeadline&&(currentPageSizeHeadline=pageResultHeadline,n.innerHTML="<strong>Results: </strong>"+currentPageSizeHeadline+" / "+pageResultHeadline):n.innerHTML="<strong>Results: </strong>"+currentPageSizeHeadline+" / "+pageResultHeadline:currentPageSizeHeadline>pageResultHeadline||pageResultHeadline<=100?(currentPageSizeHeadline=pageResultHeadline,n.innerHTML="<strong>Results: </strong>"+currentPageSizeHeadline+" / "+pageResultHeadline):pageResultHeadline>=100?(currentPageSizeHeadline=100,n.innerHTML="<strong>Results: </strong>"+currentPageSizeHeadline+" / "+pageResultHeadline):currentPageSizeHeadline<pageResultHeadline&&(currentPageSizeHeadline=pageResultHeadline,n.innerHTML="<strong>Results: </strong>"+currentPageSizeHeadline+" / "+pageResultHeadline),o.forEach(function(e){var n=e.publishedAt,t=moment(n).format("DD/MM/YYYY"),i=e;null==i.urlToImage&&(i.urlToImage="assets/images/empty.png"),null==i.description&&(i.description="No Description"),null==i.content&&(i.content="Read More"),a.push(`<div class="article-post">\n                        <div class="row">\n                            <div class="col-md-3">\n                                <div class="picture">\n                                    <img src="${i.urlToImage}"></img>\n                                </div>\n                            </div>\n                            <div class="col-md-9">\n                                <div class="article-text">\n                                    <div class="article-publish">\n                                        <div class="article-publisher">\n                                        <div class="publisher-name">\n                                            <strong>News Source:</strong> ${i.source.name}\n                                        </div>\n                                        <div class="published-time">\n                                        <strong>Date:</strong> ${t}\n                                        </div>\n                                    </div>\n                                    </div>\n                                    <div class="article-title">${i.title}</div>\n                                    <div class="article-description">${i.description}</div>\n                                    <div class="article-content"><a href="${i.url}" target="_blank">${i.content}</a></div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>`)}),0==o.length?t.innerHTML='<h1 class="no-articles" align="center">No Articles Found</h1>':t.innerHTML=a.join(""),$(".headlineMenu").show(),$("#loading").hide(),$(".menu-header").css("background-color","#f7f7f7"),pageResultHeadline<=100||currentPageSizeHeadline<=100?$("button.prevButton").hide():$("button.prevButton").show(),pageResultHeadline<=100||pageResultHeadline==currentPageSizeHeadline?$("button.nextButton").hide():$("button.nextButton").show()})}"navigation"!=e&&(currentPageHeadline=1,country=$("#menuCountry option:selected").attr("value"),category=$("#menuCategory option:selected").attr("value"),search=document.getElementById("searchBoxHeadline").value,"many"==$("#menuSources option:selected").attr("value")?sources==multiple?sources.toString():(sources=multiple).toString():sources=$("#menuSources option:selected").attr("value")),"start"==e?(country="gb",search="",$("#totalResultsInfoHeadline").hide()):$("#totalResultsInfoHeadline").show(),e?a():"all"!=country||"all"!=category||search||"all"!=sources?"all"==country&&"all"==category||"all"==sources?""==sources&&0==multiple.length?window.location.href="index.html":a():($("#myModal").modal("show"),$("#myModal .modal-title").html("Please Try Again"),$("#myModal .modal-message").html("You cannot use search with sources if category and country are specified")):($("#myModal").modal("show"),$("#myModal .modal-title").html("Please Try Again"),$("#myModal .modal-message").html("You must enter search data or at least choose a Country or Category or Source"))}function sourceChange(e){var n=document.getElementById("checklist"),t=[];"many"==e.value&&($("#selectModal").modal("show"),$(".modal-title").html("Choose Multiple Sources"),0==multiple.length&&null!=n&&addPublisher([],function(e){e.forEach(function(e){t.push(`<li class="multiple-item"><label>${e.name}</label><input type="checkbox" id="myCheck" value="${e.id}" onclick="checkBox(this)"></li>`),t.join(""),n.innerHTML=t.join("")})}))}function checkBox(e){var n=e.value;if(e.checked)multiple.push(n);else for(var t=0;t<multiple.length;t++)if(multiple[t]==n){var a=multiple.indexOf(n);multiple.splice(a,1)}}function prevHeadline(){var e=document.getElementById("totalResultsInfoHeadline");if(currentPageHeadline>1){currentPageHeadline--;var n=currentPageSizeHeadline%100;currentPageSizeHeadline-=0!=n?n:100,e.innerHTML="<strong>Results: </strong>"+currentPageSizeHeadline+" / "+pageResultHeadline,getHeadlineInfo("navigation")}}function nextHeadline(){var e=document.getElementById("totalResultsInfoHeadline");pageResultHeadline/100>1&&pageResultHeadline>currentPageSizeHeadline&&(currentPageHeadline++,currentPageSizeHeadline+=100,getHeadlineInfo("navigation"),e.innerHTML="<strong>Results: </strong>"+currentPageSizeHeadline+" / "+pageResultHeadline,pageResultHeadline-currentPageSizeHeadline<0&&(currentPageSizeHeadline=pageResultHeadline,e.innerHTML="Results: "+currentPageSizeHeadline+" / "+pageResultHeadline))}function sendHeadlines(e,n){var t=`${apiSource}top-headlines?pageSize=100&`,a=function(e){var a=new XMLHttpRequest;console.log("url: "+t),a.open("GET",t),a.send(),a.onreadystatechange=function(){4==this.readyState&&200==this.status&&n(JSON.parse(this.responseText))}};e.country||e.category||e.source||e.q?("all"!=e.country&&e.country&&(t+=`country=${e.country}&`),"all"!=e.category&&e.category&&(t+=`category=${e.category}&`),"all"!=e.sources&&e.sources&&(t+=`sources=${e.sources}&`),e.q&&(t+=`q=${e.q}&`),e.page>1&&(t+=`page=${e.page}&`),t+=`apiKey=${apiKey}`,a()):(t+=`country=gb&apiKey=${apiKey}`,a())}function addHeadline(e,n){sendHeadlines(e,function(e){n(e)})}function searchHeadline(){window.location.href="index.html"}function advancedSearch(){window.location.href="advanced.html"}$(document).ready(function(){getHeadlineInfo("start")}),$(document).ready(function(){getHeadlineInfo("start")}),$(document).ready(function(){!function(){if("/"===window.location.pathname||"/index.html"===window.location.pathname)var e=document.getElementById("menuSources");else"/advanced.html"===window.location.pathname&&(e=document.getElementById("menuSourcesAdvanced"));var n=[];n.push("<option id='menuSourceItem' selected value='all'>All Sources</option>"),n.push("<option id='menuSourceItem' value='many'>Multiple Sources</option>"),addPublisher([],function(t){t.forEach(function(t){n.push(`<option id="menuSourceItem" value="${t.id}">${t.name}</option>`),e.innerHTML=`${n}`})})}()});