const apiKey="32ad11f7baf84533819d0089abe5c95c",apiSource="https://newsapi.org/v2/";function getMenuItems(e){var n=new Array;$.getJSON("assets/data/menu.json",function(t){$.each(t,function(e,t){n.push(t)}),e(n)})}var publisherInfo;$(window).scroll(function(){$(this).scrollTop()>300?$(".scrollTop").show():$(".scrollTop").hide()}),$(document).ready(function(){$("#loading").hide(),$(".scrollTop").hide();var e=$(".scrollTop");$(e).click(function(){return $("html, body").animate({scrollTop:0},800),!1}),$("button.nextButton").hide(),$("button.prevButton").hide()}),$(document).ready(function(){if("/"===window.location.pathname||"/index.html"===window.location.pathname){var e=[],n=[],t=document.getElementById("menuCountry"),a=document.getElementById("menuCategory");getMenuItems(function(r){var o=r[1],c=r[0];o.forEach(function(n){"gb"==n.id?(e.push(`<option id="menuCountryItem" selected value="${n.id}">${n.name}</option>`),t.innerHTML=`${e}`):(e.push(`<option id="menuCountryItem" value="${n.id}">${n.name}</option>`),t.innerHTML=`${e}`)}),c.forEach(function(e){n.push(`<option id="menuCategoryItem" value="${e.id}">${e.name}</option>`),a.innerHTML=`${n}`})})}else if("/advanced.html"===window.location.pathname){var r=[],o=[],c=document.getElementById("menuLanguages"),u=document.getElementById("menuSortBy");getMenuItems(function(e){var n=e[3];e[2].forEach(function(e){r.push(`<option id="menuCategoryItem" value="${e.id}">${e.name}</option>`),c.innerHTML=`${r}`}),n.forEach(function(e){o.push(`<option id="menuCategoryItem" value="${e.id}">${e.name}</option>`),u.innerHTML=`${o}`})})}});const publisher={getPublisherInfo:()=>publisherInfo,setPublisherInfo(e){publisherInfo=e}};function sendPublisher(e,n){var t=`${apiSource}sources?`,a=function(e){var a=new XMLHttpRequest;a.open("GET",t),a.send(),a.onreadystatechange=function(){4==this.readyState&&200==this.status&&n(JSON.parse(this.responseText))}};e.country||e.language||e.category?(e.country&&(t+=`country=${e.country}&`),e.category&&(t+=`category=${e.category}&`),e.language&&(t+=`language=${e.language}&`),t+=`apiKey=${apiKey}`,a()):(t+=`&apiKey=${apiKey}`,a())}function addPublisher(e,n){sendPublisher(e,function(e){var t=e.sources;n(t),publisher.setPublisherInfo(t)})}function getPublisher(){return publisherInfo}let sources,language,sort,search,multiple=[];var pageResultSearch,currentPageSearch=1,currentPageSizeSearch=100;function getEverythingInfo(e){document.getElementById("output").innerHTML="";var n=document.getElementById("totalResultsInfoSearch"),t=document.getElementById("output");function a(){$(".searchMenu").hide(),$("#loading").show(),$(".menu-header").css("background-color","#ffffff");var a=[],r=new Array;r.sortBy=sort,r.sources=sources,r.language=language,r.q=search,r.page=currentPageSearch,addThings(r,function(r){var o=r.articles;pageResultSearch=r.totalResults,e?e?pageResultSearch<currentPageSizeSearch?(currentPageSizeSearch=pageResultSearch,n.innerHTML="<strong>Results: </strong>"+currentPageSizeSearch+" / "+pageResultSearch):0==currentPageSizeSearch&&(currentPageSizeSearch=100,n.innerHTML="<strong>Results: </strong>"+currentPageSizeSearch+" / "+pageResultSearch):n.innerHTML="<strong>Results: </strong>"+currentPageSizeSearch+" / "+pageResultSearch:currentPageSizeSearch>pageResultSearch||pageResultSearch<=100?(currentPageSizeSearch=pageResultSearch,n.innerHTML="<strong>Results: </strong>"+currentPageSizeSearch+" / "+pageResultSearch):pageResultSearch>=100?(currentPageSizeSearch=100,n.innerHTML="<strong>Results: </strong>"+currentPageSizeSearch+" / "+pageResultSearch):currentPageSizeSearch<pageResultSearch&&(currentPageSizeSearch=pageResultSearch,n.innerHTML="<strong>Results: </strong>"+currentPageSizeSearch+" / "+pageResultSearch),o.forEach(function(e){var n=e.publishedAt,t=moment(n).format("DD/MM/YYYY"),r=e;null==r.urlToImage&&(r.urlToImage="assets/images/empty.png"),null==r.description&&(r.description="No Description"),null==r.content&&(r.content="Read More"),a.push(`<div class="article-post">\n                        <div class="row">\n                            <div class="col-md-3">\n                                <div class="picture">\n                                    <img src="${r.urlToImage}"></img>\n                                </div>\n                            </div>\n                            <div class="col-md-9">\n                                <div class="article-text">\n                                    <div class="article-publish">\n                                        <div class="article-publisher">\n                                        <div class="publisher-name">\n                                            <strong>News Source:</strong> ${r.source.name}\n                                        </div>\n                                        <div class="published-time">\n                                        <strong>Date:</strong> ${t}\n                                        </div>\n                                    </div>\n                                    </div>\n                                    <div class="article-title">${r.title}</div>\n                                    <div class="article-description">${r.description}</div>\n                                    <div class="article-content"><a href="${r.url}" target="_blank">${r.content}</a></div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>`)}),0==o.length?t.innerHTML='<h1 class="no-articles" align="center">No Articles Found</h1>':t.innerHTML=a.join(""),n.innerHTML="<strong>Results: </strong>"+currentPageSizeSearch+" / "+pageResultSearch,$(".searchMenu").show(),$("#loading").hide(),$(".menu-header").css("background-color","#f7f7f7"),$("#totalResultsInfoSearch").show(),pageResultSearch<=100||currentPageSizeSearch<=100?$("button.prevButton").hide():$("button.prevButton").show(),pageResultSearch<=100||pageResultSearch==currentPageSizeSearch?$("button.nextButton").hide():$("button.nextButton").show()})}"navigation"!=e&&(currentPageSearch=1,sort=$("#menuSortBy option:selected").attr("value"),language=$("#menuLanguages option:selected").attr("value"),sources=$("#menuSourcesAdvanced option:selected").attr("value"),search=document.getElementById("adSearch").value,"many"==$("#menuSourcesAdvanced option:selected").attr("value")?sources==multiple?sources.toString():(sources=multiple).toString():sources=$("#menuSourcesAdvanced option:selected").attr("value")),e?a():"all"!=sources||search?""==sources&&0==multiple.length?window.location.href="advanced.html":a():($("#myModalTwo").modal("show").css("width","600px !important"),$(".modal-title").html("Please Try Again"),$(".modal-message").html("Choose at least a Source or use the Search"),t.innerHTML='<h1 class="no-articles" align="center">No Articles Found</h1>',$("button.nextButton").hide(),$("button.prevButton").hide(),$("#totalResultsInfoSearch").hide())}function sourceChange(e){var n=document.getElementById("checklist"),t=[];"many"==e.value&&($("#selectModalTwo").modal("show"),$(".modal-title").html("Choose Multiple Sources"),0==multiple.length&&null!=n&&addPublisher([],function(e){e.forEach(function(e){t.push(`<li class="multiple-item"><label>${e.name}</label><input type="checkbox" id="myCheck" value="${e.id}" onclick="checkBox(this)"></li>`),t.join(""),n.innerHTML=t.join("")})}))}function checkBox(e){var n=e.value;if(e.checked)multiple.push(n);else for(var t=0;t<multiple.length;t++)if(multiple[t]==n){var a=multiple.indexOf(n);multiple.splice(a,1)}}function prevSearch(){var e=document.getElementById("totalResultsInfoSearch");if(currentPageSearch>1){currentPageSearch--;var n=currentPageSizeSearch%100;currentPageSizeSearch-=0!=n?n:100,e.innerHTML="<strong>Results: </strong>"+currentPageSizeSearch+" / "+pageResultSearch,getEverythingInfo("navigation")}}function nextSearch(){var e=document.getElementById("totalResultsInfoSearch");pageResultSearch/100>1&&pageResultSearch>currentPageSizeSearch&&(currentPageSearch++,currentPageSizeSearch+=100,e.innerHTML="<strong>Results: </strong>"+currentPageSizeSearch+" / "+pageResultSearch,getEverythingInfo("navigation"),pageResultSearch-currentPageSizeSearch<0&&(currentPageSizeSearch=pageResultSearch,e.innerHTML="Results: "+currentPageSizeSearch+" / "+pageResultSearch))}function sendThings(e,n){var t=`${apiSource}everything?pageSize=100&`,a=function(e){var a=new XMLHttpRequest;console.log("url: "+t),a.open("GET",t),a.send(),a.onreadystatechange=function(){4==this.readyState&&200==this.status&&n(JSON.parse(this.responseText))}};"all"!=e.sources||"all"!=e.language||"all"!=e.sortBy||e.q?("all"!=e.sources&&e.sources&&(t+=`sources=${e.sources}&`),"all"!=e.language&&e.language&&(t+=`language=${e.language}&`),e.sortBy&&(t+=`sortBy=${e.sortBy}&`),e.q&&(t+=`q=${e.q}&`),e.page>1&&(t+=`page=${e.page}&`),t+=`apiKey=${apiKey}`,a()):(t+=`&apiKey=${apiKey}`,a())}function addThings(e,n){sendThings(e,function(e){n(e)})}function searchHeadline(){window.location.href="index.html"}function advancedSearch(){window.location.href="advanced.html"}$(document).ready(function(){document.getElementById("adSearch").value="",document.getElementById("output").innerHTML='<h1 class="no-articles" align="center">Search For Articles</h1>',$("button.nextButton").hide(),$("button.prevButton").hide()}),$(document).ready(function(){!function(){if("/"===window.location.pathname||"/index.html"===window.location.pathname)var e=document.getElementById("menuSources");else"/advanced.html"===window.location.pathname&&(e=document.getElementById("menuSourcesAdvanced"));var n=[];n.push("<option id='menuSourceItem' selected value='all'>All Sources</option>"),n.push("<option id='menuSourceItem' value='many'>Multiple Sources</option>"),addPublisher([],function(t){t.forEach(function(t){n.push(`<option id="menuSourceItem" value="${t.id}">${t.name}</option>`),e.innerHTML=`${n}`})})}()});